# 基础配置

## 1.配置RCC

![[78712882a497bf4051bb047d4b85347.png]]

## 2.配置SYS

![[291e6227755a39537e6913abb8ff178.png]]

## 3.配置时钟树

![[232aad93ef5ecc3a656de29bd93bbf5.png]]


# 控制电机配置

## 4.配置can频率以及can接收中断

![[c7083d869ed3e7f24ab16621294093f.png]]

![[db71224168323bd2a5dd7a9cca46c5f.png]]

`这里只需打开RX0的中断就行`
`can2相同步骤`


# 控制航模遥控配置

## 5.配置定时器2

`TIM2用于定时解析航模ppm值`

![[32c7260aba3ddb9c0e7eadb2ae280ee.png]]

## 6.配置PF7

![[82529f8251b12eadfe10845ac58da2e.png]]

`航模接收器接在PF7上`


# action配置

## 7.配置串口4

`串口4用于读取action数据`
`注意这里我们自行选择PC10和PC11复用为串口引脚`

![[8484d0c901deddeb26d4a9dcdf096fa.png]]


# 调试通道配置
## 8.配置串口1

`串口1用于与上位机通讯，实现数据可视化`

![[b7b1c3fe8716481313ac422a1460380.png]]


# 任务配置

## 9.配置FreeRTOS

`这里我们将默认的任务重命名成电机控制任务`
`后续的任务可以自行添加，优先级不超过BelowNormal`

电机总控任务：最高优先级

![[e53610daf98c31a061b7f4f5e8c5d30 1.png]]

底盘任务：较高优先级

![[721f74bf418dca99e0662dc1b5d6488.png]]

摩擦带发射任务：低优先级

![[c66a027f68908ae6581079151863b77.png]]

### 优先级说明：

一般情况下，电机总控任务和整车状态机任务是最高优先级，底盘是较高优先级，其他任务统一低优先级。